var Z=Object.defineProperty;var R=t=>{throw TypeError(t)};var Q=(t,e,r)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var g=(t,e,r)=>Q(t,typeof e!="symbol"?e+"":e,r),q=(t,e,r)=>e.has(t)||R("Cannot "+r);var c=(t,e,r)=>(q(t,e,"read from private field"),r?r.call(t):e.get(t)),m=(t,e,r)=>e.has(t)?R("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),b=(t,e,r,o)=>(q(t,e,"write to private field"),o?o.call(t,r):e.set(t,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();var y,O,L,x,P,j,$,M,A,T,S,z,C,N;class X{constructor({is_equal:e,name:r,owner:o,pre_processor:a,state:u}={}){m(this,y,{});m(this,O,new Map);m(this,L);m(this,x);m(this,P);m(this,j);m(this,$,{});m(this,M,new Proxy(this,{get:(e,r)=>c(this,y)[r],set:(e,r,o)=>(typeof o=="function"&&(o=o.call(this)),this.update({[r]:o}),!0)}));g(this,"clear",()=>(b(this,$,c(this,y)),b(this,y,{}),this));g(this,"update",e=>{c(this,C).call(this,e);const r=c(this,T).call(this,e);if(r)return c(this,N).call(this,r),c(this,z).call(this,c(this,A).call(this,...Object.keys(r)),this),this});m(this,A,(...e)=>{const r={};for(const o of e)r[o]={current:c(this,y)[o],previous:c(this,$)[o]};return Object.freeze(r),r});m(this,T,e=>{const r={};for(const[o,a]of Object.entries(e))(!(o in c(this,y))||!c(this,S).call(this,a,c(this,y)[o]))&&(r[o]=a);return Object.keys(r).length===0?null:r});m(this,S,(e,r)=>e===r);m(this,z,(...e)=>{for(const[r,o]of c(this,O))V(r,o,...e);return this});m(this,C,e=>{if(c(this,j))for(const[r,o]of Object.entries({...e}))c(this,j).call(this,r,o)!==void 0&&(e[r]=o)});m(this,N,e=>{b(this,$,c(this,y));for(const[r,o]of Object.entries(e))c(this,y)[r]=o;return this});var l,w;b(this,x,r),b(this,P,o),b(this,j,a),e&&b(this,S,e),u&&(c(this,C).call(this,u),c(this,N).call(this,u));const h=this;b(this,L,new(w=class{constructor(){g(this,"add",(d,f)=>{var _;return f=c(this,l).call(this,f),c(h,O).set(d,f),V(d,f,c(_=h,A).call(_,...Object.keys(c(h,y))),h),d});g(this,"clear",()=>(b(this.reactive,O,new Map),h));g(this,"has",d=>c(h,O).has(d));g(this,"remove",d=>(c(h,O).delete(d),h));m(this,l,d=>{if(d!==void 0){if(typeof d=="function")return d;if(typeof d=="string"){const f=d;d=_=>f in _}else if(Array.isArray(d)){const f=d;d=_=>{for(const E of f)if(E in _)return!0;return!1}}else{const f=Object.keys(d)[0],_=Object.values(d)[0];d=E=>f in E&&E[f].current===_}return d}})}get size(){return c(h,O).size}},l=new WeakMap,w))}get effects(){return c(this,L)}get name(){return c(this,x)}get owner(){return c(this,P)}get $(){return c(this,M)}get previous(){return Object.freeze({...c(this,$)})}get state(){return Object.freeze({...c(this,y)})}}y=new WeakMap,O=new WeakMap,L=new WeakMap,x=new WeakMap,P=new WeakMap,j=new WeakMap,$=new WeakMap,M=new WeakMap,A=new WeakMap,T=new WeakMap,S=new WeakMap,z=new WeakMap,C=new WeakMap,N=new WeakMap;function V(t,e,...r){(!e||e(...r))&&t(...r)}var W,Y;const I=new(Y=class{constructor(){m(this,W,{});g(this,"add",(t,e)=>{if(this.get(t))throw new Error(`A component with key '${t}' already registered.`);c(this,W)[t]=e});g(this,"get",t=>c(this,W)[t])}},W=new WeakMap,Y),tt=new class{author=({base:t=HTMLElement,config:e={},key:r},...o)=>{let a;if(t===HTMLElement)a=D(t,e,H,K,...o),customElements.define(r,a),I.add(r,a);else if(typeof t=="string"){const u=t;if(t=et(u),!t)throw new Error(`Invalid tag: ${u}`);rt(u)?o=[H,K,...o]:o=[H,...o],a=D(t,e,...o),customElements.define(r||`native-${u}`,a,{extends:u}),I.add(r||u,a)}else throw new Error(`Invalid base: ${t}`);return a};create=(t,{compositions:e,mixins:r,...o}={},...a)=>{const[u,...h]=t.split("."),l=new(this.get(u))(o,...a);r&&r.forEach(f=>l.mixin(f,o,...a)),e&&l.compose(...e),h.length>0&&l.classList.add(...h),l.update(o);const w=[],v=new(this.get("div")),d=[];for(const f of a)if(f!==void 0){if(J(f)){v.append(f);continue}if(Array.isArray(f)){for(const _ of f){if(!J(_))throw new Error(`Invalid node: ${_}`);v.append(_)}continue}if(typeof f=="function"){d.push(f);continue}throw new Error(`Invalid arg: ${f}`)}for(const f of d){const _=f.call(l,v);typeof _=="function"&&w.push(_)}return l.append(...v.childNodes),w.forEach(f=>f.call(l)),l};get=t=>!I.get(t)&&!t.includes("-")?this.author({base:t}):I.get(t)};function H(t,e,...r){var l,w,v,d,f,_,E;const o="$",a="on_",u="$",h=Object.freeze({aria:"aria_",attr:"attr_",css_class:".",css_var:"--",data:"data_"});return l=class extends t{constructor(...i){super(...i);m(this,w,new X({owner:this}));m(this,v,new Proxy(this,{get:(i,s)=>super[s],set:(i,s,n)=>(super[s]=n,!0)}));m(this,d,new Proxy(this,{get(i,s){if(s=B(s),!i.hasAttribute(s))return null;const n=i.getAttribute(s);if(n==="")return!0;const p=Number(n);return typeof p=="number"&&p===p?p:n},set(i,s,n){if(n===void 0)return!0;if(s=B(s),[!1,null].includes(n))return i.removeAttribute(s),!0;if(["",!0].includes(n))return i.setAttribute(s,""),!0;if(!["number","string"].includes(typeof n))throw new Error(`Invalid attr value: ${n}`);return i.setAttribute(s,n),!0}}));m(this,f,new Proxy(this,{get(i,s){return i.classList.contains(s)},set(i,s,n){return n?i.classList.add(s):i.classList.remove(s),!0}}));m(this,_,new Proxy(this,{get(i,s){return getComputedStyle(i).getPropertyValue(`--${s}`).trim()},set(i,s,n){return n?i.style.setProperty(`--${s}`,n):i.style.removeProperty(`--${s}`),!0}}));m(this,E,new Proxy(this,{get(){throw new Error("'on' is write-only.")},set(i,s,n){return i.addEventListener(s,n),!0}}));g(this,"add_event_handler",(i,s,n=!1)=>(n&&(this.addEventListener(i,s),this.dispatchEvent(new class extends Event{constructor(){super(i),this.non_event=!0}}(i)),this.removeEventListener(i,s)),this.addEventListener(i,s),this));g(this,"compose",(...i)=>{for(const s of i){const n=new s(this);if(!s.name)throw new Error("Composition class should be declared with a name or have a static 'name' prop.");Object.defineProperty(this,s.name,{enumerable:!1,configurable:!0,get:()=>n})}return this});g(this,"mixin",(i,...s)=>{for(const[n,p]of Object.entries(Object.getOwnPropertyDescriptors(i.prototype))){if(n==="__init__"){p.value.call(this,...s);continue}Object.defineProperty(this,n,p)}return this});g(this,"remove_event_handler",(i,s)=>(this.removeEventListener(i,s),this));g(this,"send_event",(i,{detail:s,...n}={})=>(this.dispatchEvent(new CustomEvent(i,{detail:s,...n})),s));g(this,"update",i=>{const s={};for(const[n,p]of Object.entries(i))if(p!==void 0){if(n in this){this[n]=p;continue}if(n.startsWith("_")){this[n]=p;continue}if(n in this.style){this.style[n]=p;continue}if(n.startsWith(h.css_class)){this.classList[p?"add":"remove"](n.slice(h.css_class.length));continue}if(n.startsWith(h.attr)){this.attr[n.slice(h.attr.length)]=p;continue}if(n.startsWith(h.data)){this.attr[`data-${n.slice(h.data.length)}`]=p;continue}if(n.startsWith(h.aria)){this.attr[`aria-${n.slice(h.aria.length)}`]=p;continue}if(n.startsWith(a)){this.on[n.slice(a.length)]=p;continue}if(n.startsWith(h.css_var)){this.css_var[n.slice(h.css_var.length)]=p;continue}if(n.startsWith(u)){s[n.slice(u.length)]=p;continue}throw new Error(`Invalid prop: ${n}`)}return Object.keys(s).length>0&&c(this,w).update(s),this});this.setAttribute("web-component",""),this.__class__.__inits__.forEach(s=>s.call(this,...i)),this.effects.add(s=>{for(const[n,{current:p}]of Object.entries(s))if(typeof n=="string"){if(n.startsWith(o))this.update({[n.slice(o.length)]:p});else for(const U of Object.values(h))if(n.startsWith(U)){this.update({[n]:p});break}}})}connectedCallback(){this.$.connected=!0,this.dispatchEvent(new Event("x-connected"))}disconnectedCallback(){this.$.connected=!1,this.dispatchEvent(new Event("x-disconnected"))}get __class__(){return l}get __super__(){return c(this,v)}get attr(){return c(this,d)}get css_class(){return c(this,f)}get css_var(){return c(this,_)}get effects(){return c(this,w).effects}get on(){return c(this,E)}get parent(){return this.parentElement}set parent(i){i&&this.parentElement!==i&&i.append(this)}get $(){return c(this,w).$}get text(){return this.textContent}set text(i){this.textContent=i}clear_content(){for(;this.firstChild;)this.firstChild.remove();return this}get_elements(...i){return[...new Set(i.map(s=>[...this.querySelectorAll(s)]).flat())]}get previous_state(){return c(this,w).previous}get state(){return c(this,w).state}remove_elements(...i){return this.get_elements(...i).forEach(s=>s.remove()),this}},w=new WeakMap,v=new WeakMap,d=new WeakMap,f=new WeakMap,_=new WeakMap,E=new WeakMap,g(l,"__inits__",[]),g(l,"compose",(...i)=>{for(const s of i){if(!s.name)throw new Error("Composition class should be declared with a name or have a static 'name' prop.");Object.defineProperty(l.prototype,s.name,{enumerable:!1,configurable:!0,get:function(){return this[`_${s.name}`]}}),l.__inits__.push(function(){this[`_${s.name}`]=new s(this)})}}),g(l,"mixin",(...i)=>{for(const s of i)for(const[n,p]of Object.entries(Object.getOwnPropertyDescriptors(s.prototype))){if(n==="__init__"){l.__inits__.push(p.value);continue}Object.defineProperty(l.prototype,n,p)}return l}),l}function et(t){const e=document.createElement(t).constructor;if(e!==HTMLUnknownElement)return e}function B(t){if(typeof t!="string")throw new Error(`Bad ingridient for making a kebab: ${t}. Go get a camel!`);return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function rt(t){const e=document.createElement(t);try{return e.attachShadow(),!0}catch{return!1}}function D(t,e={},...r){let o=r.shift()(t,e);for(const a of r){const u=a(o,e,...r);u&&(o=u)}return Object.freeze(e),o.__config__=e,o}function J(t){return t instanceof HTMLElement||["number","string"].includes(typeof t)}function K(t,e,...r){return class extends t{constructor(...a){super(...a),this.$.has_children=!1,this.$.has_content=!1,this.attachShadow({mode:"open"});const u=document.createElement("slot");this.shadowRoot.append(u),u.addEventListener("slotchange",h=>{this.send_event("slotchange"),this.$.has_children=this.children.length>0,this.$.has_content=this.childNodes.length>0})}}}const F=tt.create;let G;G="./";const k={};async function st(t){if(t in k)return k[t];const e=await nt(t),r=F("div",{innerHTML:e}),o=[...r.get_elements("template[name]").map(u=>`const ${u.getAttribute("name")} = ${JSON.stringify(u.innerHTML.trim())};`),...r.get_elements("style[name]").map(u=>{const h=u.getAttribute("name"),l=JSON.stringify(u.textContent.trim());return`const ${h} = new CSSStyleSheet();${h}.replaceSync(${l};`})].join(`
`);console.log(o),r.querySelector("script");const a=42;return k[t]=a,a}async function nt(t){return await(await fetch(`${G}${t}.html`)).text()}st("foo");F("button.btn.btn-primary",{parent:root},"Yo!");
